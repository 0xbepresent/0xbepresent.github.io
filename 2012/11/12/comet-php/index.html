<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Buscando diversas técnicas sobre comunicación asincrona nos encontramos con Comet, esta técnica funciona muy similar a AJAX, es decir, la comunicación con el servidor la mantenemos teniendo así una co">
<meta property="og:type" content="article">
<meta property="og:title" content="Chat con comet en PHP">
<meta property="og:url" content="https://bepresent.mx/2012/11/12/comet-php/index.html">
<meta property="og:site_name" content="0xbepresent">
<meta property="og:description" content="Buscando diversas técnicas sobre comunicación asincrona nos encontramos con Comet, esta técnica funciona muy similar a AJAX, es decir, la comunicación con el servidor la mantenemos teniendo así una co">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2012-11-12T06:00:00.000Z">
<meta property="article:modified_time" content="2023-01-25T18:41:41.568Z">
<meta property="article:author" content="0xbepresent">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/logo_bepresent.png">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/logo_bepresent.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/logo_bepresent.png">
        
      
    
    <!-- title -->
    <title>Chat con comet en PHP</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2013/01/13/xmpp/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2012/02/25/js-memoria/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://bepresent.mx/2012/11/12/comet-php/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://bepresent.mx/2012/11/12/comet-php/&text=Chat con comet en PHP"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bepresent.mx/2012/11/12/comet-php/&is_video=false&description=Chat con comet en PHP"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Chat con comet en PHP&body=Check out this article: https://bepresent.mx/2012/11/12/comet-php/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://bepresent.mx/2012/11/12/comet-php/&name=Chat con comet en PHP&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://bepresent.mx/2012/11/12/comet-php/&t=Chat con comet en PHP"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Chat con comet en PHP
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">0xbepresent</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2012-11-12T06:00:00.000Z" itemprop="datePublished">2012-11-12</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Buscando diversas técnicas sobre comunicación asincrona nos encontramos con Comet, esta técnica funciona muy similar a AJAX, es decir, la comunicación con el servidor la mantenemos teniendo así una conexión HTTP de larga duración, reduciendo asi el tiempo de latencia.</p>
<p>En este metodo el cliente no esta revisando constantemente si el servidor tiene algo “nuevo” para nosotros si no que el servidor abre una línea de comunicación y cuando exista una “nueva información” se la pasa al cliente.</p>
<p>Un ejemplo muy en básico es la idea de un Chat, en la antiguedad {ahaha} se usaba una cierta técnica llamada <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/Polling">“Pooling”</a>  el cual se realizaba una consulta constantemente en busca de información nueva, esto es algo pobre ya que aumentamos las peticiones hacia el servidor aunque este no tenga nada nuevo que entregarnos, pufff. Aqui vemos como implementan este tipo de <a target="_blank" rel="noopener" href="http://chategory.com/chategories/android/">técnica llamada Pooling</a>, amm si abren la consola de Chrome “F12” se vera que estan corriendo 3 archivos que son “getNumberOfUsers.php” “isTyping.php” y “listenToRecive.php”, así a ojo de buen cubero se puede ver que uno es para obtener el numero de usuarios, otros para ver si alguiene sta escribiendo y otro es para recibir los mensajes, ahahah son muchos archivos, además de un constante “pedir” al servidor, lo cual es mucho desmán.</p>
<p>Ahora imaginense algo como Facebook, ustedes abren la página y se ponene a hacer cualquier otra cosa y vuelven a la pestaña de Facebook y aparecene “nuevas” noticias, pues es algo similar, en cuanto el servidor tenga nuevas noticias o mensajes o  lo que sea el servidor envia la información al cliente osea nosotros y así sin nosotros estar realizando peticiones manuales o programadas. Bueno bueno todo esto de que el servidor nos envie datos se llama HTTP Push :D.</p>
<p>Para no hacerselar tan larga, además de que hay muchos ejemplos en la gran red dejare un ejemplo de implementación de un Chat con Comet en PHP, por ahi dejare también los <a target="_blank" rel="noopener" href="https://github.com/misalabs/chat-comet">códigos</a> paque lo disfruten :D. Cabe aclarar que si monitorean los archivos “F12” en Google Chrome se puede ver como se corta la petición que se hace al servidor, esto es basicamente la configuración del servidor y pues precisamente se hace para no crear bucles infinitos los cuales afecten el funcionamiento del servidor ;).</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://bepresent.mx/2012/11/12/comet-php/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://bepresent.mx/2012/11/12/comet-php/&text=Chat con comet en PHP"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bepresent.mx/2012/11/12/comet-php/&is_video=false&description=Chat con comet en PHP"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Chat con comet en PHP&body=Check out this article: https://bepresent.mx/2012/11/12/comet-php/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://bepresent.mx/2012/11/12/comet-php/&title=Chat con comet en PHP"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://bepresent.mx/2012/11/12/comet-php/&name=Chat con comet en PHP&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://bepresent.mx/2012/11/12/comet-php/&t=Chat con comet en PHP"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2012-2023
    0xbepresent
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
