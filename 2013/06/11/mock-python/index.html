<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Ahora traigo un tema muy interesante el cual es mocking testing para python. Esto es una herramienta para Testing. El testing de nuestro código no siempre es muy valorado sin embargo es muy eficaz si">
<meta property="og:type" content="article">
<meta property="og:title" content="Mocking testing con Python">
<meta property="og:url" content="https://bepresent.mx/2013/06/11/mock-python/index.html">
<meta property="og:site_name" content="0xbepresent">
<meta property="og:description" content="Ahora traigo un tema muy interesante el cual es mocking testing para python. Esto es una herramienta para Testing. El testing de nuestro código no siempre es muy valorado sin embargo es muy eficaz si">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://bepresent.mx/images/mock_python.png">
<meta property="article:published_time" content="2013-06-11T05:00:00.000Z">
<meta property="article:modified_time" content="2023-01-25T19:08:40.855Z">
<meta property="article:author" content="0xbepresent">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bepresent.mx/images/mock_python.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/logo_bepresent.png">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/logo_bepresent.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/logo_bepresent.png">
        
      
    
    <!-- title -->
    <title>Mocking testing con Python</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2013/07/06/laposh/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2013/05/27/vuala/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://bepresent.mx/2013/06/11/mock-python/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://bepresent.mx/2013/06/11/mock-python/&text=Mocking testing con Python"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bepresent.mx/2013/06/11/mock-python/&is_video=false&description=Mocking testing con Python"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Mocking testing con Python&body=Check out this article: https://bepresent.mx/2013/06/11/mock-python/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://bepresent.mx/2013/06/11/mock-python/&name=Mocking testing con Python&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://bepresent.mx/2013/06/11/mock-python/&t=Mocking testing con Python"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Mocking testing con Python
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">0xbepresent</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2013-06-11T05:00:00.000Z" itemprop="datePublished">2013-06-11</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Ahora traigo un tema muy interesante el cual es <a target="_blank" rel="noopener" href="http://www.voidspace.org.uk/python/mock/">mocking testing para python</a>. Esto es una herramienta para Testing. El testing de nuestro código no siempre es muy valorado sin embargo es muy eficaz si escribimos un script a base de Testing, normalmente existen ciertos aspectos los cuales hay que estar muy seguro de que la app o script este funcionando como nosotros queremos sin presentar algún error extraño el cual el usuario lo vea y no sea digerible, alguna vez han visto un error no controlado por parte de google por ejemplo y dejen ver un vomito de código y errores?.</p>
<p>Básicamente lo que hace esta libreria de Testing es reemplazar partes del codigo que estamos Testeando con objetos simulados y así simular la forma de respuesta de ciertas funciones. Por así decirlo parchamos una clase o función e introducimos algo que nosotros queramos. El ejemplo que aquí expondré es que imaginemos que tenemos una clase el cual consulta los Tweets de una cierta cuenta y no los trae en formato JSON, ahora nosotros cachamos la info y calvez convertimos esa info en objetos u algo para posterior manejo. Aquí realizamos un request a una url por ejemplo <a target="_blank" rel="noopener" href="http://search.twitter.com/search.json?q=tonsquemisa&count=5"></a><a target="_blank" rel="noopener" href="http://search.twitter.com/search.json?q=tonsquemisa&count=5">http://search.twitter.com/search.json?q=tonsquemisa&amp;count=5</a> y esta URL como verán el formato que nos regresa es JSON.</p>
<p>Ahora imaginemos que por circunstancias ajenas la URL no funciona, simplemente los <a target="_blank" rel="noopener" href="http://status.twitter.com/">servidores de Twitter</a> por alguna razón sufrieron algún daño nuclear y no regresa nada de nada, después nuestro script al consultar esa URL simplemente no regresara nada y tal vez se caiga nuestro script, para esto hay que estar preparados en nuestro cliente Twitter y poder cachar este error y realizar alguna acción la cual ayude a que el usuario no se quede así nomas con un vomito de errores, es aquí donde entra el Testing apoyándose con mock :D.</p>
<p>Escribí un <a target="_blank" rel="noopener" href="https://github.com/misalabs/python_mock">pequeño ejemplo</a> el cual podrán visualizar la idea de lo que Mock hace. Tenemos una clase la cual hace la consulta a Twitter y podemos ver que cachamos varios aspectos que es el RequestException, ConnectionError y el status code. Ahora imaginemos que esta clase es un modulo principal en alguna app mucho mas grande y por cuestiones ajenas la consulta a la URL falla y simplemente no podemos conectarnos, debemos estar seguros que se realizara alguna acción digerible para el usuario y pues debemos escribir un Test para probar el código, es eso o hackear por algún momento los servidores de Twitter y tirarlo y así probar nuestro script XD, lo que se les haga mas fácil. Tenemos también un test el cual probaremos la eficacia de nuestro script y es ahí donde Mock entra.</p>
<p>Podemos ver en esta <a target="_blank" rel="noopener" href="https://github.com/misalabs/python_mock/blob/master/tests.py#L14">linea</a> como recorremos todas las posibles excpeciones RequestException, Timeout, ConnectionError en las que puede caer un Request y probamos que todas sean cachadas correctamente.</p>
<p>Después por ejemplo en esta <a target="_blank" rel="noopener" href="https://github.com/misalabs/python_mock/blob/master/tests.py#L22">linea</a> enviamos un status code 403 y probamos que ese estatus esta cachado correctamente en nuestro script.</p>
<p>Como verán es un ejemplo muy sencillo pero muy eficaz para probar 2 aspectos, la funcionalidad de mock y la importancia del testing  aqui hice uso de ciertas librerias sin embargo lo mas importante es entender la idea de Mock y Testing. Existen <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/Desarrollo_guiado_por_pruebas">tecnicas de testing</a> las cuales debiesen saber si se dedican a escribir código, no necesariamente debemos ser expertos en Testing sin embargo debemos conocer bases las cuales ayuden a que el código sea mas ‘verynice’ :0</p>
<p>Como verán el código se encuentra en <a target="_blank" rel="noopener" href="https://github.com/misalabs/python_mock">Github</a> y escrito en Python, ademas de que use la librería mock para python, request para consumir la URL de Twitter y unittest para las pruebas. Librerías así debiesen estar en varios lenguajes para realizar Testing a su código y si no existen inventenlas ahahaha. Y pues anímense a realizar un Fork para mejorar el código :D</p>
<img class="center" src="/images/mock_python.png"/>

<ul>
<li>Actualización 2013-07-05, con las nuevas reglas en el API de Twitter ahora es necesario una autenticidad en el GET, algo así, después cuando me de tiempo mueva el ejemplo a otra instancia API como en Youtube o algo así. Aun así el ejemplo actual sirve muy bien para entender el funcionamiento de Mocking.</li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://bepresent.mx/2013/06/11/mock-python/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://bepresent.mx/2013/06/11/mock-python/&text=Mocking testing con Python"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bepresent.mx/2013/06/11/mock-python/&is_video=false&description=Mocking testing con Python"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Mocking testing con Python&body=Check out this article: https://bepresent.mx/2013/06/11/mock-python/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://bepresent.mx/2013/06/11/mock-python/&title=Mocking testing con Python"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://bepresent.mx/2013/06/11/mock-python/&name=Mocking testing con Python&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://bepresent.mx/2013/06/11/mock-python/&t=Mocking testing con Python"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2012-2024
    0xbepresent
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/0xbepresent">Projects</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/0xbepresent/audits">Audits</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
